{"version":3,"sources":["assets/scripts/Card.js"],"names":["CardStatus","NORMAL","CANUSE","CURRENT","TRY","cc","Class","Component","properties","cardBean","status","isCheck","sprite","type","Sprite","costLabel","Label","titleLabel","descLabel","levelLable","start","bindCardFunction","fun","checkFunction","getCardBean","bindCardBean","string","title","cost","level","desc","onLoad","sys","isMobile","node","on","onMouseDown","Node","EventType","MOUSE_DOWN","y","event","console","log","stopPropagation","onCancel","onDestroy","off"],"mappings":"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","sourceRoot":"/","sourcesContent":["import CardBean from \"./beans/CardBean\";\n\nexport var CardStatus = {\n    NORMAL: 1,//不能用状态\n    CANUSE: 2,//能用高亮状态\n    CURRENT: 3,//拖动状态 拖动动效，cancel判定y轴超过一定范围即使用\n    TRY: 4,//指向性卡牌使用，在cancel时，判定落点是否有角色，是否为可用角色，再回调使用\n\n}\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        cardBean: null,\n        status: null,\n        isCheck: false,\n        sprite: {\n            default: null,\n            type: cc.Sprite,\n        },\n        costLabel: {\n            default: null,\n            type: cc.Label,\n        },\n        titleLabel: {\n            default: null,\n            type: cc.Label,\n        },\n        descLabel: {\n            default: null,\n            type: cc.Label,\n        },\n        levelLable: {\n            default: null,\n            type: cc.Label,\n        },\n\n\n    },\n    start: function () {\n\n        // var node = new cc.Node('Sprite');\n        // var sp = node.addComponent(cc.Sprite);\n\n        // sp.spriteFrame = cardPic;\n        // node.parent = this.node;\n\n\n    },\n\n    bindCardFunction(fun) {\n        this.checkFunction = fun;\n    },\n\n    getCardBean(){\n      return this.cardBean;\n    },\n    bindCardBean(cardBean) {\n        this.cardBean = cardBean;\n        this.titleLabel.string = this.cardBean.title;\n        this.costLabel.string = this.cardBean.cost;\n        this.levelLable.string = this.cardBean.level;\n        this.descLabel.string = this.cardBean.desc;\n        this.titleLabel.string = this.cardBean.title;\n    },\n\n    // update: function (dt) {\n    // },\n\n    onLoad: function () {\n        // this.node.on(cc.Node.EventType.TOUCH_START, this.onMouseDown, this);\n        if (cc.sys.isMobile) {\n            this.node.on(\"click\", this.onMouseDown, this);\n        } else {\n            this.node.on(cc.Node.EventType.MOUSE_DOWN, this.onMouseDown, this);\n        }\n\n        // this.node.on(\"click\", this.onMouseDown, this);\n        //\n        // this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this);\n        // this.node.on(cc.Node.EventType.MOUSE_MOVE,this.onTouchMove,this);\n        //\n        // this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this);\n        // this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onTouchCancel,this);\n        // let self = this;\n        this.node.y = 0;\n        // this.location=[this.node.x,this.node.y];\n        // this.normalHeight=this.node.height;\n\n\n        // cc.resources.load(\"pokers\", cc.SpriteAtlas, function (err, atlas) {\n        //\n        //     let frame = atlas.getSpriteFrame(\"181\");\n        //     console.log('onion==='+self.getComponent(cc.Sprite));\n        //     self.getComponent(cc.Sprite).spriteFrame =frame\n        //     this.spriteFrame= frame;\n        // });\n    },\n    onMouseDown: function (event) {\n        console.log(\"onion\" + 'Press a key');\n        event.stopPropagation();\n        if (this.isCheck) {\n            this.isCheck = false;\n            this.node.y = this.node.y - 50;\n            this.checkFunction && this.checkFunction(this, false);\n        } else {\n            this.isCheck = true;\n            this.node.y = this.node.y + 50;\n            this.checkFunction && this.checkFunction(this, true);\n        }\n    },\n\n    onCancel: function () {\n        if (this.isCheck) {\n            this.isCheck = false;\n            this.node.y = this.node.y - 50;\n        }\n\n    },\n    onDestroy() {\n        // cc.systemEvent.off(\"mousedown\", this.onMouseDown);\n        // this.node.off(\"click\", this.onMouseDown, this);\n        // this.node.off(cc.Node.EventType.TOUCH_START, this.onMouseDown, this);\n        if (cc.sys.isMobile) {\n            this.node.off(\"click\", this.onMouseDown, this);\n        } else {\n            this.node.off(cc.Node.EventType.MOUSE_DOWN, this.onMouseDown, this);\n        }\n\n    },\n\n\n});\n"]}