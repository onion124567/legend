{"version":3,"sources":["assets/scripts/Game.js"],"names":["PokerUtil","require","AIHelper","self","StatusType","ENCOUNTER","ROUNDBEGIN","ROUNDOVER","CLEAR","DRAW","SEND","LOSE","ATTACK","UNDERATTACK","gameHero","totalCardNum","cc","Class","Component","properties","logs","type","Label","menuView","Button","coinValueView","cardPrefab","Prefab","cardArrays","Layout","sendBtn","roundOverBtn","roundType","hero","Node","enemy","enemyCardLabel","currentCard","enemyCardArrays","roundSide","roundCount","onLoad","playLog","node","on","roundOver","sendCard","gameEncounter","drawAICard","cardBean","CardBean","enemyRole","onDrawCard","push","drawCard","newCard","instantiate","card","getComponent","heroRole","bindCardBean","bindCardFunction","onCheck","addChild","isCheck","onCancel","getCardBean","sendFocusShow","value","sendEffect","appendLog","attack","sideUnderAttack","live","isAlive","destroy","toMapScene","role","pokemonleft","pokenmonright","title","roundProgram","RoleBean","bindRoleBean","scheduleOnce","rolettype","number","roundBegin","childrenCount","i","length","string","logicAI","canSend","splice","underattack","saveHeroData","Director","currentEnemy","director","loadScene","roleHp","hostHero","fullhp","hp"],"mappings":"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","sourceRoot":"/","sourcesContent":["import CardBean from \"./beans/CardBean\";\nimport RoleBean from \"./beans/RoleBean\";\nimport Director from \"./Director\";\n\nlet PokerUtil = require(\"PokerUtil\");\nlet AIHelper = require(\"AIHelper\");\nlet self;\nexport var StatusType = {\n    ENCOUNTER: 0,//遭遇\n    ROUNDBEGIN: 1,//回合开始\n    ROUNDOVER: -1,//回合结束\n    CLEAR: -2,//战斗结束\n    DRAW:2,\n    SEND: 3,//出牌\n    LOSE: 4,//弃牌\n    ATTACK: 5,//攻击时触发\n    UNDERATTACK: 6,//被攻击时触发\n}\nexport var gameHero=null;\nlet totalCardNum = 5;\n/**\n * 战斗界面 demo版本，做一个抽卡，每张卡能打3点血，敌方有20点血的demo\n */\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        logs:{\n            default:null,\n            type:cc.Label,\n        },\n\n        menuView: {\n            default: null,\n            type: cc.Button,\n        },\n        coinValueView: {\n            default: null,\n            type: cc.Label,\n        },\n        cardPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        cardArrays: {\n            default: null,\n            type: cc.Layout,\n        },\n        sendBtn: {\n            default: null,\n            type: cc.Button,\n        },\n        roundOverBtn: {\n            default: null,\n            type: cc.Button,\n        },\n        roundType: StatusType.ROUNDBEGIN,\n        hero: {\n            default: null,\n            type: cc.Node\n        },\n        enemy: {\n            default: null,\n            type: cc.Node\n        },\n        enemyCardLabel: {\n            default: null,\n            type: cc.Label,\n        },\n\n        currentCard: null,//玩家当前选中的卡片\n        enemyCardArrays:[],//敌人卡牌\n        roundSide:1,//回合轮次\n        roundCount:0,\n\n\n    },\n\n    onLoad: function () {\n        self = this;\n        this.playLog=\"游戏开始\";\n        this.roundOverBtn.node.on(\"click\", this.roundOver, this);\n        this.sendBtn.node.on(\"click\", this.sendCard, this);\n        this.gameEncounter();\n        // 这里的 this 指向 component\n    },\n    drawAICard: function () {\n        let cardBean=new CardBean();\n        self.enemyRole.onDrawCard(cardBean);\n        self.enemyCardArrays.push(cardBean);\n\n    },\n    //玩家抽牌\n    drawCard: function () {\n        let newCard = cc.instantiate(self.cardPrefab);\n        // newStar.setPicNum(\"i\"+i);\n\n        let card = newCard.getComponent('Card');\n        let cardBean=new CardBean();\n        self.heroRole.onDrawCard(cardBean);\n        card.bindCardBean(cardBean);\n        card.bindCardFunction(this.onCheck);\n        self.cardArrays.node.addChild(newCard);\n    },\n    onCheck: function (card, isCheck) {\n        if (isCheck) {//选中\n            if (self.currentCard != null) {\n                self.currentCard.onCancel();\n            }\n            self.currentCard = card;\n        } else {\n            self.currentCard = null;\n        }\n\n    },\n    /**\n     * 判断牌是否能出\n     * 判断知否是指向性牌\n     *\n     */\n    sendCard: function () {\n        if(self.roundSide!==1){//敌方回合 胜利 不能出牌\n            return;\n        }\n        if (self.currentCard != null) {\n            let card = self.currentCard.node.getComponent(\"Card\");\n            let cardBean=card.getCardBean();\n            self.sendFocusShow(cardBean);\n            let value = cardBean.sendEffect();//造成的伤害值\n            self.appendLog(\"对方受到伤害\"+value);\n            //攻击时的伤害值加强或减弱\n            value = self.heroRole.attack(value);\n            //\n            this.sideUnderAttack(self.enemyRole,null,null,value);\n            //状态调整或附加\n            let live=self.enemyRole.isAlive();\n            self.currentCard.node.destroy();\n            self.currentCard = null;\n            if(!live){\n                self.roundSide=-1;\n                self.appendLog(\"敌人死亡 游戏胜利\");\n                self.toMapScene();\n\n            }\n        }\n\n    },\n    /**先判定目标\n     * 根据状态承受伤害\n     * 宝宝死亡时销毁节点\n     */\n    sideUnderAttack:function(role,pokemonleft,pokenmonright,value){\n\n    },\n\n    sendFocusShow:function (cardBean) {\n        self.appendLog(\"出牌\"+cardBean.title);\n    },\n    roundOver: function () {\n        if(self.roundSide!==1){//敌方回合 胜利 不能出牌\n            return;\n        }\n        self.appendLog(\"回合结束\");\n        this.roundProgram(0);\n    },\n    gameEncounter: function () {\n        let hero = new RoleBean(1);\n        let enemy = new RoleBean(0);\n        this.enemyRole = this.enemy.getComponent('Role');\n        this.enemyRole.bindRoleBean(enemy);\n\n        this.heroRole = this.hero.getComponent('Role');\n        this.heroRole.bindRoleBean(hero);\n\n        this.scheduleOnce(() => this.roundProgram(1), 1);\n    },\n    /**\n     * 每回合的执行顺序\n     */\n    roundProgram: function (rolettype) {\n        let number=0;\n        this.roundSide=rolettype;\n        if (rolettype === 1) {\n            self.appendLog(\"你的回合\")\n            this.roundCount++;\n             this.heroRole.roundBegin();\n             number=self.cardArrays.node.childrenCount;\n            //抽卡直到手牌抽满\n            self.appendLog(\"你抽牌\")\n            for (let i = 0; i < totalCardNum-number; i++) {\n                this.drawCard();\n            }\n            //等待出牌\n        }else {\n            self.appendLog(\"对方回合\")\n            this.enemyRole.roundBegin();\n            number=self.enemyCardArrays.length;\n            self.appendLog(\"对方抽牌\")\n            //调用ai抽牌\n            for (let i = 0; i < totalCardNum-number; i++) {\n                this.drawAICard();\n            }\n            this.enemyCardLabel.string=self.enemyCardArrays.length+\"张\";\n            this.logicAI();\n\n        }\n\n\n    },\n    //AI出牌逻辑\n    logicAI(){\n        for(let i=0;i<self.enemyCardArrays.length;){\n            let cardBean=self.enemyCardArrays[i];\n            let canSend=true;\n            if(canSend){\n                self.enemyCardArrays.splice(i, 1);\n                let value=cardBean.sendEffect();\n                value=self.enemyRole.attack(value);\n                self.appendLog(\"你受到伤害\"+value);\n                self.sendFocusShow(cardBean);\n                let live=self.heroRole.underattack(value);\n                if(!live){\n                    self.appendLog(\"英雄死亡 游戏结束\");\n                    self.roundSide=-1;\n                    return;\n                }\n                this.enemyCardLabel.string=self.enemyCardArrays.length+\"张\";\n                self.scheduleOnce(() => self.logicAI(), 1);\n                return;\n            }else {\n                i++;\n            }\n\n        }\n        self.enemyRole.roundOver();\n        self.roundProgram(1);\n    },\n\n//     move:function(node,distance){\n//         // 创建一个移动动作\n//         let seq = cc.repeat(\n//             cc.sequence(\n//                 cc.moveBy(2,  -distance, 50),\n//                 cc.moveBy(2,distance, -50)\n//             ), 2);\n//\n//\n// // 执行动作\n//         node.runAction(seq);\n// // 停止一个动作\n// //         node.stopAction(action);\n//     },\n    /**\n     * 切换至地图\n     */\n    toMapScene: function () {\n        this.saveHeroData();\n        Director.currentEnemy=null;\n        cc.director.loadScene('outermap');\n\n    },\n    saveHeroData:function () {\n        if(self.heroRole.roleHp<=Director.hostHero.fullhp){\n            Director.hostHero.hp=self.heroRole.roleHp;\n        }else {\n            Director.hostHero.hp=Director.hostHero.fullhp;\n        }\n    },\n    appendLog: function (string) {\n        self.playLog = self.playLog + \"\\n\" + string;\n        self.logs.string = self.playLog;\n\n    }\n\n});\n"]}